<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è‹±æ–‡å¡«ç©ºæ¸¬é©—</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#4CAF50">
  <link rel="icon" href="icons/icon-192.png">
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(function() { console.log("Service Worker è¨»å†ŠæˆåŠŸ"); });
    }
  </script>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    h1 {
      font-size: 24px;
      margin-bottom: 10px;
    }
    input {
      font-size: 20px;
      padding: 10px;
      width: 80%;
      max-width: 300px;
      box-sizing: border-box;
      margin-top: 10px;
    }
    button {
      font-size: 18px;
      padding: 10px 15px;
      margin: 6px 4px;
      border-radius: 6px;
      border: 1px solid #ccc;
      background: #f5f5f5;
    }
    #result, #answerCompare, #previousAnswer {
      margin-top: 20px;
      font-size: 18px;
      word-wrap: break-word;
    }
    .letter-box {
      display: inline-block;
      width: 22px;
    }
    hr {
      margin: 30px 0;
    }
  </style>
</head>
<body>

  <h1>è‹±æ–‡å–®å­—å¡«ç©ºé¡Œ</h1>
  <p id="chinese"></p>
  <p id="question"></p>
  <input type="text" id="answer" placeholder="è«‹å¡«å…¥å®Œæ•´å–®å­—">
  <br>
  <button onclick="checkAnswer()">é€å‡ºç­”æ¡ˆ</button>
  <button onclick="speakWord()">ğŸ”Š å”¸å‡ºå–®å­—</button>
  <button onclick="repeatAudio()">ğŸ” é‡æ’­</button>
  <button onclick="nextQuestion()">â¡ï¸ ä¸‹ä¸€é¡Œ</button>
  <button onclick="redoLast()">ğŸ”™ ä¸Šä¸€é¡Œ</button>

  <p id="result"></p>
  <p id="answerCompare"></p>

  <hr>
  <div id="previousAnswer">
    <h3>â¬…ï¸ ä¸Šä¸€é¡Œå›é¡§</h3>
    <p id="prevQuestion"></p>
    <p id="prevInput"></p>
    <p id="prevCompare"></p>
  </div>

  <script>
    const rawData = `
abound	è±å¯Œï¼›å……æ»¿
aim	ç›®æ¨™
affiliate	åˆ†éƒ¨
autorize	æˆæ¬Š
Annulment	å»¢é™¤
assignment	æŒ‡å®š
Accounting	æœƒè¨ˆ
account	å¸³æˆ¶ï¼›æ¥­å‹™ï¼›å®¢æˆ¶
accessible	å¯æ¥è¿‘çš„
accessories	é£¾å“
acclaimed	å»£å—å¥½è©•
appliance	æ‡‰ç”¨
affirm	ç¢ºèª
arose	ç™¼ç”Ÿ
attendance	å‡ºå¸­
agreement	åŒæ„ï¼›å”å®š
approval	è´Šæˆ
attentive	æ³¨æ„çš„
aid	å¹«åŠ©
achievement	æˆå°±
appraisal	è©•åƒ¹
assessment	è©•ä¼°
accuracy	æº–ç¢ºæ€§
adjourn	ä¼‘æœƒï¼›å»¶æœŸ
adaptable	é©æ‡‰åŠ›å¼·çš„
ambitious	æœ‰é‡å¿ƒçš„
asylum	æ”¶å®¹æ‰€
approbation	ç¨±è®šï¼›èªå¯
anarchy	ç„¡æ”¿åºœ
articles	ç”¨å“
annuity	å¹´é‡‘
automated teller machine	è‡ªå‹•ææ¬¾æ©ŸATM
avocation	å‰¯æ¥­
alloy	åˆé‡‘
appeal	å‘¼ç±²
audit	æŸ¥å¸³
accrue	å¢åŠ 
audible	å¯è½è¦‹çš„
affluent	å¯Œè£•çš„
auspicious	å‰åˆ©çš„
advisor	é¡§å•
attendant	æœå‹™å“¡
assistant	åŠ©ç†
advocate	æå€¡è€…
architect	å»ºç¯‰å¸«
accountant	æœƒè¨ˆå¸«
attendee	å‡ºå¸­è€…
audience	è§€çœ¾
astrology	å æ˜Ÿå­¸
astronomy	å¤©æ–‡å­¸
asteroid	å°è¡Œæ˜Ÿ
acid	é…¸
alkalinity	é¹¼åº¦
aluminum	é‹
archipelago	ç¾¤å³¶
ammeter	é›»æµéŒ¶
anode	é™½æ¥µ
appointment	é ç´„ï¼›ç´„æœƒ
allocate	åˆ†é…ï¼›åˆ†æ´¾
applicant	ç”³è«‹äºº
appoint	æŒ‡æ´¾
acquisition	ç²å¾—
amplify	æ“´å¤§
asset	è³‡ç”¢
acquire	ç²å¾—
assess	è©•ä¼°
amendment	ä¿®æ­£
agenda	è­°ç¨‹
alternative	æ›¿ä»£çš„
announce	å®£å¸ƒ
articulate	å–„æ–¼è¡¨é”çš„
automaton	æ©Ÿå™¨äºº
applaud	é¼“æŒ
audition	è©¦è½
aerobics	æœ‰æ°§é‹å‹•
alleviate	æ¸›è¼•
antibiotic	æŠ—ç”Ÿç´ 
affection	æ„Ÿæƒ…ï¼›å¥½æ„Ÿ
aspect	æ–¹é¢ï¼›è§€é»
assumption	å‡è¨­
attempt	è©¦åœ–
alter	æ”¹è®Š
assurance	ä¿è­‰
absurd	è’è¬¬çš„
ample	å……è£•çš„
approximately	å¤§ç´„
administrator	è¡Œæ”¿äººå“¡
affiliation	è¯ç¹«ï¼›è¯åˆ
antagonism	å°æŠ—ï¼›æ•µå°
adaptability	é©æ‡‰æ€§
aggressiveness	æ”»æ“Šæ€§ï¼›é€²å–æ€§
administrative ability	ï¨ˆæ”¿ç®¡ï§¤èƒ½ï¦Š
autocratic leader	å°ˆåˆ¶å¼ï¦´å°
achievement-oriented leadership	æˆå°±å–å‘å‹ï¦´å°
appraisal tool	è©•åƒ¹å·¥å…·
be absent from	ç¼ºå¸­
absence or mind	å¿ƒä¸åœ¨ç„‰
absorb	å¸æ”¶ï¼›å¸å¼•
abundant in	å¯Œæœ‰
by accident	æ„å¤–åœ°
in accord with	èˆ‡...ä¸€è‡´
with one accord	å…¨é«”ä¸€è‡´åœ°
in accordance with	æ ¹æ“š
on one's own account	ç‚ºäº†è‡ªå·±çš„åˆ©ç›Š
on account	å¸³æˆ¶
on account of	å› ç‚º
on no account	çµ•ä¸
of ...account	æœ‰...é‡è¦æ€§
take...into account	æŠŠ......è€ƒæ…®é€²å»
give sb. an account of	è§£é‡‹
account for	è§£é‡‹
accuse...of	æ§å‘Š
be accustomed to	ç¿’æ…£æ–¼
be acquainted with	ç²¾é€š
act on	è½å¾...è¡Œäº‹
adapt oneself to	é©æ‡‰
adjust oneself to	ä½¿è‡ªå·±é©æ‡‰
adapt...(for)	æ”¹ç·¨
in addition	æ­¤å¤–
in addition to	é™¤äº†...ä¹‹å¤–
as well as	ä»¥åŠ
adhere to	éµå®ˆ
abide by	éµå®ˆ
adjacent	é„°è¿‘çš„
admit of	å®¹è¨±
in advance	äº‹å…ˆ
to advantage	å„ªé»
have an advantage over	å‹é
take advantage of	åˆ©ç”¨
agree with	åŒæ„(äºº)
agree to	åŒæ„ï¼ˆäº‹ï¼‰
in agreement (with)	èˆ‡...ä¸€è‡´
ahead of	åœ¨...ä¹‹å‰
in all	å…¨éƒ¨
after all	ç•¢ç«Ÿ
(not) at all	ä¸€é»ä¹Ÿä¸
all at once	çªç„¶åœ°
above all	æœ€é‡è¦çš„æ˜¯
all in all	ç¸½è€Œè¨€ä¹‹
all but	å¹¾ä¹
allow for	è€ƒæ…®åˆ°
amount to	ç¸½è¨ˆ
answer for	å°...è² è²¬
answer to	å›æ‡‰
be anxious about	å°...æ„Ÿåˆ°ç„¦æ…®
anxious for	æ¸´æœ›ï¼›æ“”æ†‚
apologize to sb. for sth.	ç‚º...å‘...é“æ­‰
appeal to sb. for sth.	ç‚ºæŸäº‹å‘æŸäººå‘¼ç±²
appeal to sb.	å¸å¼•
apply to sb. for sth.	ç‚º...å‘...ç”³è«‹
apply for	ç”³è«‹
apply to	é©ç”¨æ–¼
approve of	è´Šæˆ
arise from	èµ·å› æ–¼
arrange for sb./sth. to do sth.	å®‰æ’...åš
arrive on	åˆ°é”
arrive at	åˆ°é”(å°åœ°æ–¹)
arrive in	åˆ°é”(å¤§åœ°æ–¹)
be ashamed of	æ„Ÿåˆ°ç¾æ„§
assure sb. of sth.	å‘...ä¿è­‰
. attach(to)	é™„ä¸Š
make an attempt at doing sth.	è©¦åœ–åš...
attend to	ç…§æ–™
attitude to	å°...çš„æ…‹åº¦
attribute to	æ­¸å› æ–¼
on the average	å¹³å‡
(be) aware of	æ„è­˜åˆ°
at the back of	åœ¨...å¾Œé¢
at one's back	æ”¯æŒ
adjacent to	é„°æ¥çš„
at one's fingertips	ç›®å‰
ability	èƒ½åŠ›
accordingly	å› æ­¤
actually	äº‹å¯¦ä¸Š
adjustment	èª¿æ•´
advise	å»ºè­°
agree	åŒæ„
airline	èˆªç©ºå…¬å¸
amend	ä¿®æ­£
annoying	æƒ±äººçš„
appetizer	é–‹èƒƒèœ
approach	æ¥è¿‘
argue	çˆ­è«–
assets	è³‡ç”¢
attach	é™„ä¸Š
accommodate	å®¹ç´
agreeable	ä»¤äººæ„‰å¿«çš„
aisle	èµ°é“
annual	ä¸€å¹´ä¸€åº¦çš„
appreciable	æ˜é¡¯çš„
appropriate	é©ç•¶çš„
assign	æŒ‡æ´¾
attachment	é™„ä»¶
awareness	å¯Ÿè¦º
absolutely	çµ•å°åœ°
accommodation	ä½å®¿
adapter	é©é…å™¨
advantageous	æœ‰åˆ©çš„;æœ‰ç›Šçš„
afford	è² æ“”å¾—èµ·
alarm	è­¦å ±
amusing	æœ‰è¶£çš„
anticipate	é æœŸ
appreciate	æ¬£è³
approve	è´Šæˆ
arrange	å®‰æ’
authority	æ¬Šå¨
accept	æ¥å—
affordable	è² æ“”å¾—èµ·çš„
agricultural	è¾²æ¥­çš„
analysis	åˆ†æ
anxious	ç„¦æ…®çš„
application	ç”³è«‹
approximate	å¤§ç´„çš„
arrangement	å®‰æ’
assist	å¹«åŠ©
authorize	æˆæ¬Š
accomplishment	æˆå°±
admittance	é€²å…¥
advertisement	å»£å‘Š
agency	æ©Ÿæ§‹
analyze	åˆ†æ
apologize	é“æ­‰
apply	ç”³è«‹
appreciative	è®šè³çš„ï¼›æ„Ÿæ¿€çš„
arbitrate	ä»²è£ï¼›å…¬æ–·
assemble	çµ„è£
assistance	å”åŠ©
attentively	å°ˆå¿ƒåœ°
availability	æœ‰æ•ˆ
advance	äº‹å…ˆï¼›å‰é€²
announcement	å®£å¸ƒ
apprentice	å­¸å¾’
attract	å¸å¼•
able	èƒ½å¤ 
above	åœ¨...ä¸Šé¢
abroad	åœ¨åœ‹å¤–
across	æ©«è¶Š;ç©¿é
act	è¡Œå‹•ï¼›è¡¨æ¼”
action	å‹•ä½œ
afraid	å®³æ€•çš„
apartment	å…¬å¯“
appear	å‡ºç¾
aunt	é˜¿å§¨ï¼›å§‘å§‘
absence	ç¼ºå¸­
absent	ç¼ºå¸­çš„
accident	æ„å¤–
activity	æ´»å‹•
addition	æ­¤å¤–
address	è™•ç†ï¼›åœ°å€
admit	æ‰¿èª
advice	å¿ å‘Š
affair	äº‹ä»¶
affect	å½±éŸ¿
against	åå°ï¼›å°æŠ—
ahead	å‘å‰
aircraft	é£›æ©Ÿ
album	å°ˆè¼¯
alike	ç›¸åƒçš„
alive	æ´»è‘—çš„
altogether	å®Œå…¨åœ°
among	åœ¨...ä¹‹ä¸­
amount	æ•¸é‡
ancient	å¤ä»£çš„
ankle	è…³è¸
ape	çŒ¿ï¼›çŒ´
appearance	å¤–è¡¨
appetite	é£Ÿæ…¾
arrival	åˆ°é”
article	æ–‡ç« 
asleep	ç¡è‘—çš„
attend	å‡ºå¸­
author	ä½œè€…
available	å¯ç”¨çš„
average	å¹³å‡
acceptable	å¯æ¥å—çš„
accurate	ç²¾ç¢ºçš„
ache	ç–¼ç—›
achieve	é”æˆ
additional	é¡å¤–çš„
admire	æ¬£è³
advanced	å…ˆé€²çš„
advantage	å„ªé»
adventure	å†’éšª
advertise	å»£å‘Š
afterward	å¾Œä¾†
agriculture	è¾²æ¥­
alley	å°å··
almond	æä»
alphabet	å­—æ¯
ambassador	å¤§ä½¿
ambition	é‡å¿ƒ
ambulance	æ•‘è­·è»Š
anyhow	ç„¡è«–å¦‚ä½•
apart	åˆ†é–‹åœ°
apron	åœè£™
armed	æ­¦è£çš„
arrest	é€®æ•
ash	ç°ç‡¼
aside	åœ¨...æ—é‚Š
assume	å‡è¨­
athlete	é‹å‹•å“¡
attitude	æ…‹åº¦
automatic	è‡ªå‹•çš„
automobile	æ±½è»Š
avenue	å¤§é“
awaken	å–šé†’
award	çå“
aware	çŸ¥é“çš„
awful	ç³Ÿç³•çš„
awkward	å°·å°¬çš„
abandon	æ”¾æ£„
absolute	çµ•å°çš„
abstract	æŠ½è±¡çš„
academic	å­¸è¡“çš„
accent	å£éŸ³
acceptance	æ¥å—
access	é€²å…¥
accidental	æ„å¤–çš„
accompany	é™ªä¼´
accomplish	å®Œæˆ
accuse	æŒ‡æ§
acquaintance	èªè­˜
adapt	é©æ‡‰
addict	ä¸Šç™®
adequate	è¶³å¤ çš„
adjust	èª¿æ•´
admirable	ä»¤äººæ¬½ä½©çš„
admiration	æ¬½ä½©
admission	æ‰¿èª
adopt	æ¡ç”¨ï¼›æ”¶é¤Š
agent	ç¶“ç´€äºº
aggressive	ä¾µç•¥çš„ï¼›å¥½é¬¥çš„
alcohol	é…’ç²¾
alert	è­¦è¦ºçš„
allowance	é›¶ç”¨éŒ¢
amateur	æ¥­é¤˜çš„
ambiguous	å«ç³Šä¸æ¸…çš„
amuse	å¨›æ¨‚
ancestor	ç¥–å…ˆ
anniversary	é€±å¹´ç´€å¿µæ—¥
annoy	æƒ¹æƒ±
anxiety	ç„¦æ…®
apparent	æ˜é¡¯çš„
appreciation	æ¬£è³
aquarium	æ°´æ—é¤¨
arch	æ‹±é–€
arise	ç™¼ç”Ÿ
arms	æ­¦å™¨
artificial	äººé€ çš„
artistic	è—è¡“çš„
ashamed	ç¾æ„§çš„
aspirin	é˜¿æ–¯åŒ¹éˆ
assembly	é›†æœƒ
associate	è¯æƒ³
association	å”æœƒ
assure	ä¿è­‰
athletic	é‹å‹•çš„
atmosphere	æ°£æ°›
atom	åŸå­;å¾®ç²’
atomic	åŸå­çš„
authentic	çœŸå¯¦çš„
autobiography	è‡ªå‚³
autograph	è¦ªç­†ç°½å
await	ç­‰å¾…
abbreviate	ç¸®å¯«
abide	éµå®ˆ
aboriginal	åŸä½æ°‘çš„
abstraction	æŠ½è±¡ï¼›å¿ƒä¸åœ¨ç„‰
abundance	è±å¯Œ
academy	å­¸é™¢
accessory	é…ä»¶
acclaim	æ­¡å‘¼ï¼›ç¨±è®š
accordance	ä¸€è‡´;å’Œè«§
accountable	æ‡‰è² è²¬ä»»çš„
accumulate	ç´¯ç©
accumulation	ç´¯ç©
accusation	æŒ‡æ§
accustom	ä½¿ç¿’æ…£
acne	ç²‰åˆº
acre	è‹±ç•
adaptation	æ”¹ç·¨ï¼›é©æ‡‰
addiction	ä¸Šç™®
administer	ç®¡ç†
administrate	ç®¡ç†;æ”¯é…
admiral	æµ·è»ä¸Šå°‡
adolescence	é’æ˜¥æœŸ
advisory	å‹¸å‘Šçš„
aesthetic	ç¾å­¸çš„
affectionate	æ·±æƒ…çš„
airtight	å¯†å°çš„
airway	èˆªç·š
algebra	ä»£æ•¸
alienate	ä½¿ç–é 
align	æ’æˆç›´ç·š
allege	æŒ‡æ§
alligator	çŸ­å»é±·
altitude	é«˜åº¦ï¼›æµ·æ‹”
ambiguity	ä¸æ˜ç¢ºï¼›å«ç³Šæ›–æ˜§
amid	åœ¨...ä¹‹ä¸­
amidst	åœ¨...ç•¶ä¸­
analogy	ç›¸ä¼¼ï¼›é¡æ¯”
analytical	åˆ†æçš„
anchor	éŒ¨
animate	ä½¿æœ‰ç”Ÿæ°£
annoyance	æƒ±æ€’
anthem	åœ‹æ­Œ
anticipation	æœŸå¾…
antonym	åç¾©å­—
applicable	é©ç”¨çš„
archaeology	è€ƒå¤å­¸
archive	æª”æ¡ˆ
arithmetic	ç®—è¡“
ascend	ä¸Šå‡
aspire	ç«‹å¿—
assassinate	æš—æ®º
asthma	æ°£å–˜
astray	è¿·é€”åœ°
astronaut	å¤ªç©ºäºº
astronomer	å¤©æ–‡å­¸å®¶
attain	é”åˆ°
auditorium	ç¦®å ‚
avert	é¿å…
aviation	èˆªç©º
awesome	ä»¤äººæ•¬ç•çš„
awhile	ç‰‡åˆ»`;

    const questions = rawData.trim().split('\n').map(line => {
      const [word, meaning] = line.split('\t');
      return { word, meaning };
    });

    let currentQuestion = null;
    let currentUtterance = null;
    let lastQuestion = null;
    let lastUserInput = '';
    let fromRedo = false;

    function getMaskedWord(word) {
      if (word.length <= 2) return word;
      let masked = word[0];
      for (let i = 1; i < word.length - 1; i++) {
        masked += ' _';
      }
      masked += ' ' + word[word.length - 1];
      return masked.toUpperCase();
    }

    function nextQuestion() {
      if (currentQuestion && !fromRedo) {
        checkAnswer(true);
        savePreviousResult();
      }

      fromRedo = false;
      const randomIndex = Math.floor(Math.random() * questions.length);
      lastQuestion = currentQuestion;
      currentQuestion = questions[randomIndex];

      showQuestion();
    }

    function redoLast() {
      if (!lastQuestion) return;
      fromRedo = true;
      currentQuestion = lastQuestion;
      document.getElementById('result').textContent = '';
      document.getElementById('answerCompare').textContent = '';
      document.getElementById('answer').value = '';
      showQuestion();
    }

    function showQuestion() {
      document.getElementById('chinese').textContent = `ä¸­æ–‡ï¼š${currentQuestion.meaning}`;
      document.getElementById('question').textContent = `è‹±æ–‡ï¼š${getMaskedWord(currentQuestion.word)}`;
      document.getElementById('answer').value = '';
      document.getElementById('answer').focus();
      currentUtterance = null;
    }

    function savePreviousResult() {
      document.getElementById('prevQuestion').innerHTML = `<strong>å–®å­—ï¼š</strong> ${currentQuestion.word.toUpperCase()}ï¼ˆ${currentQuestion.meaning}ï¼‰`;
      document.getElementById('prevInput').innerHTML = `<strong>ä½ çš„ç­”æ¡ˆï¼š</strong> ${lastUserInput.toUpperCase()}`;
      document.getElementById('prevCompare').innerHTML = document.getElementById('answerCompare').innerHTML;
    }

    function checkAnswer(silent = false) {
      const inputBox = document.getElementById('answer');
      const userInput = inputBox.value.trim().toLowerCase();
      lastUserInput = userInput;
      const correct = currentQuestion.word.toLowerCase();
      const result = document.getElementById('result');
      const compareDisplay = document.getElementById('answerCompare');

      if (userInput === correct) {
        if (!silent) {
          result.textContent = "âœ… æ­£ç¢ºï¼";
          result.style.color = "green";
        }
        compareDisplay.innerHTML = `<span style="color:green">${correct.toUpperCase()}</span>`;
      } else {
        if (!silent) {
          result.textContent = "âŒ éŒ¯èª¤ï¼Œè«‹çœ‹ä¸‹æ–¹æ¯”å°çµæœ";
          result.style.color = "red";
        }

        let output = '';
        const maxLen = Math.max(userInput.length, correct.length);
        for (let i = 0; i < maxLen; i++) {
          const userChar = userInput[i] || '';
          const correctChar = correct[i] || '';
          if (userChar === correctChar) {
            output += `<span class="letter-box" style="color:green">${(userChar || '_').toUpperCase()}</span>`;
          } else {
            output += `<span class="letter-box" style="color:red">${(userChar || '_').toUpperCase()}</span>`;
          }
        }
        compareDisplay.innerHTML = output.trim();
      }

      inputBox.value = '';
    }

    function speakWord() {
      if (!currentQuestion) return;
      currentUtterance = new SpeechSynthesisUtterance(currentQuestion.word);
      currentUtterance.lang = 'en-US';
      speechSynthesis.speak(currentUtterance);
    }

    function repeatAudio() {
      if (currentUtterance) {
        speechSynthesis.speak(currentUtterance);
      } else {
        speakWord();
      }
    }

    document.addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        checkAnswer();
      }
    });

    nextQuestion();
  </script>

</body>
</html>
